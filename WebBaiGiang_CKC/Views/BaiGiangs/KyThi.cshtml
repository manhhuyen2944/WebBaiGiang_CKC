@model IEnumerable<WebBaiGiang_CKC.Models.KyKiemTra>

@{
    var lstMon = ViewBag.lstSubject as List<MonHoc>;

}
@section Scripts{
    <script src="~/assets/js/menu_.js">
    </script>
}
@{
    var mssvClaim = User.Claims.FirstOrDefault(c => c.Type == "MSSV");
    var mssv_ = "";
    if (mssvClaim != null)
    {
        mssv_ = mssvClaim.Value;
    }

    var kiemtraviews = ViewBag.kiemtra as List<DanhSachThi>;
    var dk_can = ViewBag.DKCan ;
}
<main>
    <div class="menu-toggle"> <a href="#">Menu</a> </div>
    <div>
        @await Html.PartialAsync("~/Views/PartialView/_Menu.cshtml")
        <div class="noidung">
            <h2>
                Kỳ kiểm tra
            </h2>
            <hr />
            <div style="padding-bottom:20px;">
                @if (User.Identity.Name == null)
                {
                    <h1 style="color:orangered">vui lòng đăng nhập trước khi kiểm tra!!! </h1>
                }
            </div>
            @foreach (var item in kiemtraviews)
            {
                @if (item.TaiKhoan.MSSV == mssv_ && item.TrangThai == false && DateTime.UtcNow.AddHours(7) >= item.KyKiemTra.ThoiGianBatDau && DateTime.UtcNow.AddHours(7) < item.KyKiemTra.ThoiGianKetThuc)
                {
                    <div style="padding-bottom:20px;">
                        <div style="border: 2px solid #696969 ; border-radius: 10px 10px 10px 10px;padding: 8px;overflow:hidden;">
                            <div style="float:left;padding-right:250px; overflow:hidden">
                                <h2>@item.KyKiemTra.TenKyKiemTra </h2>
                                <p class="tieudethe">
                                    Bắt đầu : @item.KyKiemTra.ThoiGianBatDau
                                </p>
                                <p class="tieudethe">
                                    Kết thúc : @item.KyKiemTra.ThoiGianKetThuc
                                </p>
                                <p class="tieudethe">
                                    Thời gian làm bài: @item.KyKiemTra.ThoiGianLamBai Phút
                                </p>
                            </div>
                             <div style="float:left;padding-top:20px;padding-right:70px;">
                                <p>Trạng thái: Chưa làm </p>
                            </div>
                                <form asp-controller="BaiGiangs" asp-action="BaiKiemTra" method="post">
                                    <div style="padding-top:20px;">
                                        <input type="hidden" name="id" value="@item.KyKiemTra.KyKiemTraId" />
                                        <button type="submit" class="btn btn-success mb-2"> Bắt đầu làm bài</button>
                                    </div>
                                </form>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</main>
